import{d as P,w as D}from"./index.96ce4f3b.js";import{Z as b}from"./index.388cba13.js";function Q(e,t,r,n){var s,o,f=!1,M=r.length>=2,S=(a,u)=>{if(s=u,M&&(o=a),!f){let l=t(a,u);if(t.length<2)u(l);else return l}f=!1},v=P(e,S,n),A=!Array.isArray(e);function R(a){var u=r(a,o);A?(f=!0,e.set(u)):u.forEach((l,m)=>{f=!0,e[m].set(l)}),f=!1}var y=!1;function h(a){var u,l,m,d;if(y){d=a(b(v)),s(d);return}var V=v.subscribe(E=>{y?u?l=!0:u=!0:m=E});d=a(m),y=!0,s(d),V(),y=!1,l&&(d=b(v)),u&&R(d)}return{subscribe:v.subscribe,set(a){h(()=>a)},update:h}}const x=20,c=D([]),T=D(null),g=new Map,p=e=>{if(g.has(e))return;const t=setTimeout(()=>{g.delete(e),k(e)},1e3);g.set(e,t)},B=e=>{const t=g.get(e);t&&clearTimeout(t)};function L(e){e.id&&B(e.id),c.update(t=>t.map(r=>r.id===e.id?{...r,...e}:r))}function W(e){c.update(t=>[e,...t].slice(0,x))}function j(e){b(c).find(t=>t.id===e.id)?L(e):W(e)}function C(e){c.update(t=>(e?p(e):t.forEach(r=>{p(r.id)}),t.map(r=>r.id===e||e===void 0?{...r,visible:!1}:r)))}function k(e){c.update(t=>e===void 0?[]:t.filter(r=>r.id!==e))}function z(e){T.set(e)}function F(e){let t;T.update(r=>(t=e-(r||0),null)),c.update(r=>r.map(n=>({...n,pauseDuration:n.pauseDuration+t})))}const H={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function G(e={}){return{toasts:Q(c,r=>r.map(n=>{var s,o;return{...e,...e[n.type],...n,duration:n.duration||((s=e[n.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||H[n.type],style:[e.style,(o=e[n.type])==null?void 0:o.style,n.style].join(";")}}),r=>r),pausedAt:T}}const I=e=>typeof e=="function",w=(e,t)=>I(e)?e(t):e,N=(()=>{let e=0;return()=>(e+=1,e.toString())})(),J=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),U=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||N()}),_=e=>(t,r)=>{const n=U(t,e,r);return j(n),n.id},i=(e,t)=>_("blank")(e,t);i.error=_("error");i.success=_("success");i.loading=_("loading");i.custom=_("custom");i.dismiss=e=>{C(e)};i.remove=e=>k(e);i.promise=(e,t,r)=>{const n=i.loading(t.loading,{...r,...r==null?void 0:r.loading});return e.then(s=>(i.success(w(t.success,s),{id:n,...r,...r==null?void 0:r.success}),s)).catch(s=>{i.error(w(t.error,s),{id:n,...r,...r==null?void 0:r.error})}),e};export{L as a,F as e,J as p,z as s,i as t,G as u};
